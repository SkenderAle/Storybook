
<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Storybook Studio - Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/opendyslexic@2/opendyslexic.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&family=Andika&family=Amatic+SC:wght@700&display=swap" rel="stylesheet">
    <style>
        .font-opendyslexic { font-family: 'OpenDyslexic', sans-serif; }
        .font-patrick { font-family: 'Patrick Hand', cursive; }
        .font-andika { font-family: 'Andika', sans-serif; }
        .font-amatic { font-family: 'Amatic SC', cursive; }
        
        body { background-color: #f1f5f9; color: #1e293b; margin: 0; font-family: 'Andika', sans-serif; }

        .book-spread {
            filter: drop-shadow(0 25px 50px rgba(0, 0, 0, 0.15));
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            max-height: 85vh;
        }

        .custom-scrollbar::-webkit-scrollbar { width: 8px; height: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f5f9; }
        .custom-scrollbar::-webkit-scrollbar-thumb { 
            background: #cbd5e1; 
            border-radius: 10px; 
        }

        .book-spine {
            background: linear-gradient(to right, rgba(0,0,0,0.05) 0%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.05) 100%);
            width: 40px;
            position: absolute;
            top: 0;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            z-index: 20;
            pointer-events: none;
        }

        .print-only { display: none; }

        @media print {
            @page { size: landscape; margin: 0; }
            html, body { height: auto !important; overflow: visible !important; background: white !important; width: 100% !important; }
            #root { height: auto !important; overflow: visible !important; display: block !important; }
            .no-print { display: none !important; }
            .print-only { display: block !important; }
            .print-container { display: block !important; width: 100% !important; height: auto !important; }
            .print-page {
                page-break-after: always !important;
                break-after: page !important;
                display: flex !important;
                flex-direction: row !important;
                width: 100vw !important;
                height: 100vh !important;
                box-shadow: none !important;
                border: none !important;
                overflow: hidden !important;
                position: relative !important;
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
            .page-side { width: 50% !important; height: 100% !important; overflow: hidden !important; position: relative !important; flex-shrink: 0 !important; }
        }
    </style>
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@^18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@^18.2.0/client",
        "@google/genai": "https://esm.sh/@google/genai@^1.38.0",
        "htm": "https://esm.sh/htm@^3.1.1"
      }
    }
    </script>
</head>
<body class="h-screen overflow-hidden">
    <div id="root"></div>

    <script type="module">
        import React, { useState, useRef, useEffect } from 'react';
        import ReactDOM from 'react-dom/client';
        import { GoogleGenAI, Type } from "@google/genai";
        import htm from 'htm';

        const html = htm.bind(React.createElement);

        const ImageStyle = {
            CLASSIC: 'classico',
            REALISTIC: 'realistico',
            HYPER_REALISTIC: 'iper realistico',
            FUTURISTIC: 'futuristico',
            COMIC: 'fumetto',
            MANGA: 'manga',
            PENCIL: 'matita',
            OIL_PAINTING: 'pittura a olio',
            WATERCOLOR: 'acquerello'
        };

        const IMAGE_STYLES = [
            { value: ImageStyle.CLASSIC, label: 'Classico' },
            { value: ImageStyle.REALISTIC, label: 'Realistico' },
            { value: ImageStyle.HYPER_REALISTIC, label: 'Iper realistico' },
            { value: ImageStyle.FUTURISTIC, label: 'Futuristico' },
            { value: ImageStyle.COMIC, label: 'Fumetto' },
            { value: ImageStyle.MANGA, label: 'Manga' },
            { value: ImageStyle.PENCIL, label: 'Matita' },
            { value: ImageStyle.OIL_PAINTING, label: 'Pittura a olio' },
            { value: ImageStyle.WATERCOLOR, label: 'Acquerello' },
        ];

        const FONTS = [
            { value: 'font-patrick', label: 'Handwriting (Scrittura)' },
            { value: 'font-opendyslexic', label: 'Accessibile (Dyslexic)' },
            { value: 'font-andika', label: 'Sans Modern (Pulito)' },
            { value: 'font-amatic', label: 'Artistico (Sottile)' },
        ];

        const BLANK_SVG = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='100%25' height='100%25' fill='%23f8fafc'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='sans-serif' font-size='20' fill='%23cbd5e1'%3EPronto per l'immagine...%3C/text%3E%3C/svg%3E";

        const PageView = ({ page, index, isPrint, settings, updatePageText, title, author }) => {
            return html`
                <div className=${`flex w-full bg-white book-spread overflow-hidden relative ${isPrint ? 'print-page shadow-none' : 'aspect-[1.6/1] max-w-5xl rounded-2xl'}`}>
                    <div className="book-spine" />

                    <div className="page-side w-1/2 h-full bg-slate-50 border-r border-slate-200 relative flex items-center justify-center p-8 flex-shrink-0 overflow-hidden">
                        <div className="w-full h-full flex items-center justify-center relative overflow-hidden">
                            <img 
                                src=${page.imageUrl} 
                                style=${{ transform: `scale(${page.imageScale || 1})`, transformOrigin: 'center' }}
                                className="max-w-full max-h-full object-contain shadow-sm rounded-sm border border-slate-200/50 bg-white transition-transform duration-300" 
                                alt=${`Pagina ${index}`} 
                            />
                        </div>
                        <div className="absolute inset-y-0 right-0 w-16 bg-gradient-to-l from-black/[0.03] to-transparent pointer-events-none" />
                    </div>
                    
                    <div className="page-side w-1/2 h-full relative flex flex-col items-center justify-center text-center bg-white flex-shrink-0">
                        <div className="absolute inset-y-0 left-0 w-16 bg-gradient-to-r from-black/[0.03] to-transparent pointer-events-none" />
                        
                        <div className=${`w-full max-w-[85%] z-10 px-6 ${settings.fontFamily}`} style=${{ fontSize: index === 0 ? `${settings.fontSize * 1.2}px` : `${settings.fontSize}px`, color: settings.textColor }}>
                            ${index === 0 ? html`
                                <div className="space-y-6 flex flex-col items-center justify-center h-full max-h-full py-6">
                                    <div className="flex-1 flex items-center justify-center overflow-hidden w-full">
                                        <h1 className="font-amatic text-4xl md:text-5xl lg:text-6xl text-indigo-950 leading-[1.1] uppercase tracking-tight break-words text-center" style=${{ fontSize: 'clamp(1.5rem, 5vw, 3.5rem)', maxWidth: '100%', maxHeight: '60%', overflow: 'hidden', textOverflow: 'ellipsis' }}>
                                            ${title || "Il Mio Libro"}
                                        </h1>
                                    </div>
                                    <div className="w-16 h-1 bg-indigo-200 rounded-full flex-shrink-0" />
                                    <p className="text-xl font-patrick text-slate-400 italic flex-shrink-0">di ${author || "Autore"}</p>
                                </div>
                            ` : html`
                                <div 
                                    contentEditable=${!isPrint} 
                                    suppressContentEditableWarning 
                                    onBlur=${(e) => updatePageText(e.currentTarget.innerText, index)}
                                    className="outline-none focus:ring-2 focus:ring-indigo-100 p-2 rounded whitespace-pre-wrap min-h-[100px] text-justify"
                                >
                                    ${page.text || (isPrint ? "" : "Nessun testo in questa pagina.")}
                                </div>
                            `}
                        </div>
                        
                        <div className="absolute bottom-6 w-full text-center text-[9px] text-slate-300 font-bold uppercase tracking-[0.4em]">
                            ${index === 0 ? "COPERTINA" : `PAGINA ${index}`}
                        </div>
                    </div>
                </div>
            `;
        };

        const App = () => {
            const [pages, setPages] = useState([]);
            const [title, setTitle] = useState('');
            const [author, setAuthor] = useState('');
            const [storyInput, setStoryInput] = useState('');
            const [numPages, setNumPages] = useState(6);
            const [currentIndex, setCurrentIndex] = useState(0);
            const [isGeneratingStory, setIsGeneratingStory] = useState(false);
            const [isGeneratingImage, setIsGeneratingImage] = useState(false);
            const [status, setStatus] = useState('');
            const [hasApiKey, setHasApiKey] = useState(false);
            const [settings, setSettings] = useState({
                fontFamily: 'font-patrick',
                fontSize: 24,
                textColor: '#1e293b'
            });

            const importInputRef = useRef(null);

            useEffect(() => {
                const checkKey = async () => {
                    if (window.aistudio && await window.aistudio.hasSelectedApiKey()) {
                        setHasApiKey(true);
                    }
                };
                checkKey();
            }, []);

            const openKeySelector = async () => {
                if (window.aistudio) {
                    await window.aistudio.openSelectKey();
                    setHasApiKey(true);
                }
            };

            const generateStoryStructure = async () => {
                setIsGeneratingStory(true);
                setStatus('Generazione storia in corso...');
                
                try {
                    const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });
                    const requestedCount = Math.min(Math.max(4, numPages), 20);
                    
                    const systemPrompt = `Sei un esperto scrittore di libri per bambini. 
                    Genera una storia in esattamente ${requestedCount} parti.
                    REGOLE:
                    1. Pagina 0: COPERTINA. Campo "text" vuoto "".
                    2. Altre pagine: Testo narrativo pieno.
                    3. Campo "imagePrompt": descrizione scena visiva.
                    Input: "${storyInput}"`;

                    const response = await ai.models.generateContent({
                        model: 'gemini-3-flash-preview',
                        contents: `Scrivi una storia completa di ${requestedCount} pagine su: ${storyInput}`,
                        config: {
                            systemInstruction: systemPrompt,
                            responseMimeType: "application/json",
                            responseSchema: {
                                type: Type.OBJECT,
                                properties: {
                                    title: { type: Type.STRING },
                                    pages: {
                                        type: Type.ARRAY,
                                        items: {
                                            type: Type.OBJECT,
                                            properties: {
                                                text: { type: Type.STRING },
                                                imagePrompt: { type: Type.STRING }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    });

                    const data = JSON.parse(response.text);
                    setTitle(data.title || "Nuovo Libro");
                    setPages(data.pages.map((p, i) => ({
                        id: Math.random().toString(36).substr(2, 9),
                        text: p.text || (i === 0 ? "" : "Testo non generato."),
                        imageUrl: BLANK_SVG,
                        imagePrompt: p.imagePrompt || "Una bellissima illustrazione magica.",
                        imageScale: 1,
                        style: ImageStyle.CLASSIC
                    })));
                    setCurrentIndex(0);
                    setStatus('Storia generata!');
                } catch (e) { 
                    console.error(e);
                    if (e.message.includes("quota") || e.message.includes("429")) {
                        setStatus('ERRORE: Quota API superata. Controlla il piano.');
                    } else {
                        setStatus('Errore generazione.');
                    }
                }
                finally { setIsGeneratingStory(false); setTimeout(() => setStatus(''), 5000); }
            };

            const generateImageForPage = async (idx) => {
                if (!hasApiKey && window.aistudio) {
                    await openKeySelector();
                }

                const page = pages[idx];
                setIsGeneratingImage(true);
                setStatus(`Generando immagine ${idx} (Modello Pro)...`);

                try {
                    // Creiamo una nuova istanza per assicurarci di usare la chiave pi√π aggiornata
                    const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });
                    const prompt = `Professional children's book illustration, ${page.style} style: ${page.imagePrompt}. High quality, artistic.`;
                    
                    const response = await ai.models.generateContent({
                        model: 'gemini-3-pro-image-preview',
                        contents: { parts: [{ text: prompt }] },
                        config: { 
                            imageConfig: { 
                                aspectRatio: "4:3",
                                imageSize: "1K" 
                            } 
                        }
                    });

                    const part = response.candidates[0].content.parts.find(p => p.inlineData);
                    if (part) {
                        const newUrl = `data:image/png;base64,${part.inlineData.data}`;
                        setPages(prev => {
                            const up = [...prev];
                            up[idx] = { ...up[idx], imageUrl: newUrl };
                            return up;
                        });
                        setStatus('Immagine creata! ‚ú®');
                    }
                } catch (e) { 
                    console.error(e);
                    if (e.message.includes("quota") || e.message.includes("429")) {
                        setStatus('QUOTA SUPERATA. Verifica fatturazione GCP.');
                        alert("Quota superata. Assicurati che la chiave API appartenga a un progetto GCP con fatturazione attiva (piano a pagamento).");
                    } else if (e.message.includes("Requested entity was not found")) {
                        await openKeySelector();
                    } else {
                        setStatus('Errore immagine.'); 
                    }
                }
                finally { setIsGeneratingImage(false); setTimeout(() => setStatus(''), 4000); }
            };

            const handleExport = () => {
                const blob = new Blob([JSON.stringify({ title, author, storyInput, pages, settings })], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${title.replace(/\s+/g, '_') || 'libro'}.json`;
                a.click();
            };

            const handleImport = (e) => {
                const file = e.target.files[0];
                if (!file) return;
                const reader = new FileReader();
                reader.onload = (ev) => {
                    try {
                        const data = JSON.parse(ev.target.result);
                        setTitle(data.title || '');
                        setAuthor(data.author || '');
                        setStoryInput(data.storyInput || '');
                        setPages(data.pages || []);
                        setSettings(data.settings || settings);
                        setCurrentIndex(0);
                    } catch(err) { alert("File non valido."); }
                };
                reader.readAsText(file);
            };

            return html`
                <div className="flex flex-col md:flex-row h-screen relative bg-slate-100">
                    <div className="print-only print-container">
                        ${pages.map((p, i) => html`<${PageView} key=${p.id} page=${p} index=${i} isPrint=${true} settings=${settings} title=${title} author=${author} />`)}
                    </div>

                    <aside className="no-print w-full md:w-80 bg-white border-r flex flex-col z-50 shadow-xl overflow-hidden">
                        <div className="p-6 border-b bg-indigo-50/30">
                            <h2 className="text-3xl font-amatic text-indigo-700 mb-0.5 tracking-widest uppercase">‚ú® StoryStudio</h2>
                            <p className="text-[8px] text-slate-400 font-bold uppercase tracking-widest">IA Pro Book Editor</p>
                            
                            <div className="mt-4 space-y-2">
                                <button onClick=${openKeySelector} className=${`w-full py-2 px-3 rounded-xl text-[10px] font-bold uppercase transition-all ${hasApiKey ? 'bg-emerald-100 text-emerald-700 border border-emerald-200' : 'bg-amber-100 text-amber-700 border border-amber-200 animate-pulse'}`}>
                                    ${hasApiKey ? '‚úÖ Pro API Connected' : '‚ö†Ô∏è Connect Paid API Key'}
                                </button>
                                <p className="text-[7px] text-slate-400 text-center">Richiesta per superare i limiti di quota</p>
                            </div>

                            <div className="space-y-3 mt-4">
                                <input type="text" placeholder="Titolo opera" className="w-full p-2 border rounded-xl text-sm font-bold outline-none focus:ring-2 ring-indigo-100" value=${title} onChange=${e => setTitle(e.target.value)} />
                                <input type="text" placeholder="Nome Autore" className="w-full p-2 border rounded-xl text-sm outline-none focus:ring-2 ring-indigo-100" value=${author} onChange=${e => setAuthor(e.target.value)} />
                            </div>
                        </div>

                        <div className="flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar">
                            <div className="space-y-4">
                                <label className="text-[9px] font-black uppercase text-slate-400">Trama del libro</label>
                                <textarea className="w-full p-3 border rounded-xl text-xs min-h-[140px] resize-none focus:ring-2 ring-indigo-100 outline-none" placeholder="Es: Un bambino trova una chiave dorata in giardino..." value=${storyInput} onChange=${e => setStoryInput(e.target.value)} />
                                <div className="space-y-2">
                                    <div className="flex justify-between text-[9px] font-black uppercase"><span>Pagine</span> <span>${numPages}</span></div>
                                    <input type="range" min="4" max="20" className="w-full accent-indigo-600" value=${numPages} onChange=${e => setNumPages(parseInt(e.target.value))} />
                                </div>
                                <button onClick=${generateStoryStructure} disabled=${isGeneratingStory} className="w-full py-4 rounded-2xl font-bold text-white bg-indigo-600 hover:bg-indigo-700 shadow-lg disabled:bg-slate-300 transition-all active:scale-95">
                                    ${isGeneratingStory ? 'SCRITTURA...' : 'GENERA STORIA'}
                                </button>
                            </div>
                            
                            ${status && html`<div className="p-3 bg-indigo-50 rounded-xl border border-indigo-100 text-[10px] text-center font-bold text-indigo-600 uppercase animate-pulse">${status}</div>`}
                            
                            ${pages.length > 0 && html`
                                <div className="space-y-4 border-t pt-4">
                                    <p className="text-[9px] font-black uppercase text-slate-400">Anteprima Pagine</p>
                                    <div className="grid grid-cols-2 gap-2">
                                        ${pages.map((p, i) => html`
                                            <div key=${p.id} className=${`relative rounded-lg overflow-hidden border-2 cursor-pointer transition-all ${currentIndex === i ? 'border-indigo-600 ring-2 ring-indigo-50' : 'border-slate-100 hover:border-slate-300'}`} onClick=${() => setCurrentIndex(i)}>
                                                <img src=${p.imageUrl} className="w-full aspect-video object-cover" />
                                                <div className="absolute bottom-0 w-full bg-black/60 text-white text-[8px] text-center py-0.5 font-bold">${i === 0 ? 'COV' : `Pag ${i}`}</div>
                                            </div>
                                        `)}
                                    </div>
                                </div>
                            `}
                        </div>
                    </aside>

                    <main className="no-print flex-1 flex flex-col items-center justify-center p-6 lg:p-12 relative bg-slate-50">
                        <div className="absolute top-8 flex items-center gap-6 z-40">
                            <button onClick=${() => setCurrentIndex(Math.max(0, currentIndex - 1))} className="bg-white p-4 rounded-full shadow-xl hover:scale-110 active:scale-90" disabled=${currentIndex === 0}>‚ùÆ</button>
                            <div className="bg-white/95 px-8 py-3 rounded-full text-[10px] font-black shadow-md border uppercase tracking-widest text-slate-500">
                                ${pages.length > 0 ? (currentIndex === 0 ? 'Copertina' : `Pagina ${currentIndex} / ${pages.length - 1}`) : 'StoryStudio Pro'}
                            </div>
                            <button onClick=${() => setCurrentIndex(Math.min(pages.length - 1, currentIndex + 1))} className="bg-white p-4 rounded-full shadow-xl hover:scale-110 active:scale-90" disabled=${currentIndex === pages.length - 1}>‚ùØ</button>
                        </div>
                        
                        ${pages.length > 0 ? html`<${PageView} page=${pages[currentIndex]} index=${currentIndex} settings=${settings} title=${title} author=${author} updatePageText=${(val, idx) => {
                            const up = [...pages]; up[idx].text = val; setPages(up);
                        }} />` : html`
                            <div className="text-slate-200 text-center animate-bounce">
                                <div className="text-9xl opacity-30">üìñ</div>
                                <p className="text-2xl font-amatic font-bold text-slate-300 tracking-widest mt-4">INIZIA DA SINISTRA</p>
                            </div>
                        `}
                    </main>

                    <aside className="no-print w-full md:w-80 bg-white border-l p-6 flex flex-col z-50 shadow-xl overflow-hidden">
                        <h3 className="font-amatic text-2xl font-bold border-b pb-4 mb-6 uppercase tracking-widest text-slate-700">Editor Pagina</h3>
                        
                        ${pages.length > 0 ? html`
                            <div className="flex-1 space-y-8 overflow-y-auto custom-scrollbar pr-2">
                                <div className="bg-indigo-50/50 p-4 rounded-2xl border border-indigo-100 space-y-4 shadow-sm">
                                    <label className="text-[9px] font-black uppercase text-indigo-400 flex items-center gap-2">üíé Generatore Pro</label>
                                    <div className="space-y-1">
                                        <label className="text-[8px] font-bold text-slate-500 uppercase">Stile Grafico</label>
                                        <select className="w-full p-2 text-xs border rounded-lg bg-white outline-none" value=${pages[currentIndex].style} onChange=${e => {
                                            const up = [...pages]; up[currentIndex].style = e.target.value; setPages(up);
                                        }}>
                                            ${IMAGE_STYLES.map(s => html`<option value=${s.value}>${s.label}</option>`)}
                                        </select>
                                    </div>
                                    <div className="space-y-1">
                                        <label className="text-[8px] font-bold text-slate-500 uppercase">Prompt Immagine</label>
                                        <textarea className="w-full p-2 text-xs border rounded-lg h-24 resize-none bg-white outline-none" value=${pages[currentIndex].imagePrompt} onChange=${e => {
                                            const up = [...pages]; up[currentIndex].imagePrompt = e.target.value; setPages(up);
                                        }} />
                                    </div>
                                    <button onClick=${() => generateImageForPage(currentIndex)} disabled=${isGeneratingImage} className="w-full py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl text-xs font-bold shadow-md disabled:bg-slate-300 transition-all active:scale-95">
                                        ${isGeneratingImage ? 'GENERAZIONE PRO...' : 'GENERA IMMAGINE'}
                                    </button>
                                </div>
                                
                                <div className="space-y-6">
                                    <div className="space-y-2">
                                        <label className="text-[9px] font-black uppercase text-slate-400">Font</label>
                                        <select className="w-full p-2 border rounded-xl text-xs font-bold outline-none bg-slate-50" value=${settings.fontFamily} onChange=${e => setSettings({...settings, fontFamily: e.target.value})}>
                                            ${FONTS.map(f => html`<option value=${f.value}>${f.label}</option>`)}
                                        </select>
                                    </div>
                                    <div className="space-y-2">
                                        <div className="flex justify-between text-[9px] font-black uppercase"><span>Dimensione Testo</span> <span>${settings.fontSize}px</span></div>
                                        <input type="range" min="16" max="60" className="w-full accent-indigo-600" value=${settings.fontSize} onChange=${e => setSettings({...settings, fontSize: parseInt(e.target.value)})} />
                                    </div>
                                    <div className="space-y-2">
                                        <label className="text-[9px] font-black uppercase text-slate-400">Colore</label>
                                        <input type="color" className="w-full h-10 cursor-pointer rounded-lg p-1 bg-white border" value=${settings.textColor} onChange=${e => setSettings({...settings, textColor: e.target.value})} />
                                    </div>
                                    <div className="space-y-2">
                                        <div className="flex justify-between text-[9px] font-black uppercase"><span>Zoom Immagine</span></div>
                                        <input type="range" min="0.5" max="2.0" step="0.05" className="w-full accent-indigo-600" value=${pages[currentIndex].imageScale || 1} onChange=${e => {
                                            const up = [...pages]; up[currentIndex].imageScale = parseFloat(e.target.value); setPages(up);
                                        }} />
                                    </div>
                                </div>
                            </div>
                        ` : html`<div className="text-center text-slate-300 py-20 italic text-xs uppercase">Configurazione non attiva</div>`}
                        
                        <div className="pt-6 border-t mt-auto space-y-3">
                            <div className="grid grid-cols-2 gap-2">
                                <button onClick=${handleExport} disabled=${pages.length === 0} className="py-2.5 bg-slate-100 hover:bg-slate-200 rounded-xl text-[9px] font-bold uppercase disabled:opacity-50">Esporta</button>
                                <button onClick=${() => importInputRef.current.click()} className="py-2.5 bg-slate-100 hover:bg-slate-200 rounded-xl text-[9px] font-bold uppercase">Importa</button>
                                <input type="file" ref=${importInputRef} className="hidden" onChange=${handleImport} />
                            </div>
                            <button onClick=${() => window.print()} disabled=${pages.length === 0} className="w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold text-[10px] uppercase tracking-widest shadow-lg disabled:opacity-50 transition-all active:scale-95">üñ®Ô∏è STAMPA / PDF</button>
                        </div>
                    </aside>
                </div>
            `;
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>
